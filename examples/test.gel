
(require Gtk)

( (. Gtk init) )

(function add (parent child)
    (set parent "child" child)
)

(define window (new (. Gtk Window)))

# the string 'title' was defined in the interpreter
(set window "title" title)

(set window "default-width" 320)
(set window "default-height" 120)

(connect window "hide"
    (function (widget)
        ( (. Gtk main-quit) )
    )
)

(define box (new (. Gtk VBox)))
(add window box)
(set box "border-width" 12)

# the function 'make-label' was defined in the interpreter
(define label (make-label))
(add box label)

(define button (new (. Gtk Button)))
(add box button)
(set button "label" "Click me!")

(define entry (new (. Gtk Entry)))
(add box entry)

(define counter 0)

(connect button "clicked"
    (function (widget)
        (set widget "label" "Thanks!")
        (set counter (+ counter 1))
        (set entry "text" counter)
        (print counter)
    )
)

( (. window show-all) )

( (. Gtk main) )

