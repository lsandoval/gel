
(define window (object-new "GtkWindow"))
(object-set window "title" "Hello world")
(object-set window "default-width" 320)
(object-set window "default-height" 120)
(object-connect window "hide" quit)

(define box (object-new "GtkVBox"))
(object-set window "child" box)
(object-set box "border-width" 12)

(object-set box "child" label)

(define button (object-new "GtkButton"))
(object-set box "child" button)
(object-set button "label" "Click me!")

(define entry (object-new "GtkEntry"))
(object-set box "child" entry)

(define counter 0)

(object-connect button "clicked"
    (lambda (widget)
        (display "Previous label " (object-get widget "label"))
        (newline)
        (object-set widget "label" "Thanks!")
        (set! counter (+ counter 1))
        (object-set entry "text" counter)
    )
)

(object-set label "visible" TRUE)
(object-set button "visible" TRUE)
(object-set entry "visible" TRUE)
(object-set box "visible" TRUE)
(object-set window "visible" TRUE)

