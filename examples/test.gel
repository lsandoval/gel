
(var window (new "GtkWindow"))
(set window "title" "Hello world")
(set window "default-width" 320)
(set window "default-height" 120)
(connect window "hide" quit)

(var box (new GtkVBox))
(set window "child" box)
(set box "border-width" 12)

(var button (new GtkButton))
(set box "child" button)
(set button "label" "Click me!")

(var entry (new GtkEntry))
(set box "child" entry)

(var counter 0)

(connect button "clicked"
    (lambda (widget)
        (print "Previous label " (get widget "label"))
        (set widget "label" "Thanks!")
        (let counter (add counter 1))
        (set entry "text" counter)
    )
)

(set button "visible" TRUE)
(set entry "visible" TRUE)
(set box "visible" TRUE)
(set window "visible" TRUE)

